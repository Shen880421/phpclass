{% extends "dashboard.twig" %}
{% block content %}
	<h4>檢視購物車</h4>
	<div class="row">
		<div class="col-md-12">
			<div class="card shadown-sm">
				<div class="card-body">
					<table class="table table-striped table-hover">
						<thead>
							<th>流水號</th>
							<th>產品圖</th>
							<th>品項</th>
							<th>單價</th>
							<th>數量</th>
							<th>小計</th>
							<th>功能</th>
						</thead>
						<tbody>
							{% for item in items %}
								<tr>
									<td>{{ item.id }}</td>
									<td>
										{% if item.cover %}
											<img src="uploads/{{item.cover}}" height="30">
										{% else %}
											<span>該產品暫無圖片</span>
										{% endif %}
									</td>
									<td>{{ item.name }}</td>
									<td class="text-end">{{ item.price | number_format(0, '.', ',')}}</td>
									<td class="text-end">{{ item.quan }}</td>
									<td class="text-end">{{ item.subtotal | number_format(0, '.', ',')}}</td>
									<td>
										<a href="bk-product.php?mode=additem&pid={{item.id}}&quan=1" class="btn btn-sm btn-secondary" title="增加該品項">
											<i class="bi bi-plus-lg"></i>
										</a>
										<a href="bk-product.php?mode=reduceitem&pid={{item.id}}" class="btn btn-sm btn-secondary" title="減少該品項">
											<i class="bi bi-dash-lg"></i>
										</a>
										<a href="bk-product.php?mode=removeitem&pid={{item.id}}" class="btn btn-sm btn-danger" title="移除該品項">
											<i class="bi bi-trash"></i>
										</a>
									</td>
								</tr>
							{% endfor %}
							<tr>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td class="text-end">總計:</td>
								<td class="text-end">NT$
									{{ total | number_format(0, '.', ',') }}
								</td>
								<td></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="card-footer text-end">
					<a href="ecpay.php" class="btn btn-success">結帳</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block script %}{% endblock %}
